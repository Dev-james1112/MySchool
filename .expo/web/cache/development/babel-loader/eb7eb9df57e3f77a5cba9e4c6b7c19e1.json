{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _AsyncStorage = require(\"../../assets/scripts/AsyncStorage\");\n\nvar _jsxFileName = \"C:\\\\.project\\\\today_meal\\\\pages\\\\pages\\\\meal_more.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction Meal_more() {\n  var _this = this;\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      school_NM_data = _useState2[0],\n      setSchool_NM_data = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      school_ID_data = _useState4[0],\n      setSchool_ID_data = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      school_REGION_data = _useState6[0],\n      setSchool_REGION_data = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(\"\"),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      meal_data = _useState8[0],\n      setMeal_data = _useState8[1];\n\n  var today = new Date();\n  var year = today.getFullYear().toString();\n  var month = ('0' + (today.getMonth() + 1).toString()).slice(-2);\n  var date = ('0' + today.getDate().toString()).slice(-2);\n  var YYYYMMDD = year + month + date;\n  (0, _react.useEffect)(function () {\n    (0, _AsyncStorage.loadSchool)(\"@NM\").then(function (data) {\n      return setSchool_NM_data(data);\n    });\n    (0, _AsyncStorage.loadSchool)(\"@ID\").then(function (data) {\n      return setSchool_ID_data(data);\n    });\n    (0, _AsyncStorage.loadSchool)(\"@REGION\").then(function (data) {\n      return setSchool_REGION_data(data);\n    });\n  }, []);\n  var key = '6c8bda44c1d949b88a48a7d0bb3a8205';\n  var url = \"https://open.neis.go.kr/hub/mealServiceDietInfo?KEY=\" + key + \"&TYPE=json&pIndex=1&pSize=30&SD_SCHUL_CODE=\" + school_ID_data + \"&ATPT_OFCDC_SC_CODE=\" + school_REGION_data + \"&MLSV_FROM_YMD=\" + YYYYMMDD;\n  fetch(url).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data['mealServiceDietInfo'] != undefined) {\n      setMeal_data(data['mealServiceDietInfo'][1]['row'].map(function (i) {\n        return _react.default.createElement(_reactNative.View, {\n          style: styles.meal_box,\n          key: i['MLSV_TO_YMD'],\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 73\n          }\n        }, _react.default.createElement(_reactNative.Text, {\n          style: styles.date,\n          key: i['MLSV_FROM_YMD'],\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 126\n          }\n        }, i.MLSV_FROM_YMD.slice(0, 4), \"\\uB144 \", i.MLSV_FROM_YMD.slice(4, 6), \"\\uC6D4 \", i.MLSV_FROM_YMD.slice(6), \"\\uC77C\"), _react.default.createElement(_reactNative.Text, {\n          style: styles.meal,\n          key: i['DDISH_NM']['MLSV_YMD'],\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 271\n          }\n        }, i.DDISH_NM.replace(/[\"']/g, \"\").replace(/<br\\/>/g, \"\\n\")));\n      }));\n    } else {\n      setMeal_data(_react.default.createElement(_reactNative.Text, {\n        style: styles.error,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 26\n        }\n      }, \"\\uC5B4\\uB77C? \\uB4F1\\uB85D\\uB41C \\uAE09\\uC2DD \\uC815\\uBCF4\\uAC00 \\uC5C6\\uB124\\uC694.\"));\n    }\n  });\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.ScrollView, {\n    showsVerticalScrollIndicator: false,\n    showsHorizontalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, meal_data));\n}\n\nvar styles = _reactNative.StyleSheet.create({\n  main: {\n    backgroundColor: \"#FFFFFF\",\n    width: \"100%\",\n    paddingHorizontal: 25\n  },\n  date: {\n    fontSize: 20,\n    fontWeight: \"700\",\n    lineHeight: 30,\n    marginBottom: 6,\n    color: \"#000\"\n  },\n  TodayDate: {\n    fontSize: 20,\n    fontWeight: \"700\",\n    lineHeight: 30,\n    marginBottom: 6,\n    color: \"#F46413\"\n  },\n  meal: {\n    fontSize: 16,\n    lineHeight: 20,\n    paddingBottom: 10,\n    color: \"#2D3033\"\n  },\n  meal_box: {\n    backgroundColor: \"#F3F2F3\",\n    margin: 6,\n    borderRadius: 20,\n    padding: 12\n  },\n  header: {\n    width: \"100%\",\n    height: 50,\n    marginHorizontal: 10\n  },\n  content: {\n    paddingTop: 30,\n    paddingBottom: \"20%\"\n  }\n});\n\nvar _default = Meal_more;\nexports.default = _default;","map":{"version":3,"names":["Meal_more","useState","school_NM_data","setSchool_NM_data","school_ID_data","setSchool_ID_data","school_REGION_data","setSchool_REGION_data","meal_data","setMeal_data","today","Date","year","getFullYear","toString","month","getMonth","slice","date","getDate","YYYYMMDD","useEffect","loadSchool","then","data","key","url","fetch","res","json","undefined","map","i","styles","meal_box","MLSV_FROM_YMD","meal","DDISH_NM","replace","error","main","StyleSheet","create","backgroundColor","width","paddingHorizontal","fontSize","fontWeight","lineHeight","marginBottom","color","TodayDate","paddingBottom","margin","borderRadius","padding","header","height","marginHorizontal","content","paddingTop"],"sources":["C:/.project/today_meal/pages/pages/meal_more.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, ScrollView, Image, TouchableOpacity } from 'react-native';\r\nimport { loadSchool } from '../../assets/scripts/AsyncStorage';\r\n//import {Tcalendar, TcalendarTop} from '../../assets/components/Calendar';\r\n\r\nfunction Meal_more() {\r\n    const [school_NM_data, setSchool_NM_data] = useState();\r\n    const [school_ID_data, setSchool_ID_data] = useState();\r\n    const [school_REGION_data, setSchool_REGION_data] = useState();\r\n    const [meal_data, setMeal_data] = useState(\"\");\r\n    const today = new Date();   \r\n    const year = today.getFullYear().toString(); // 년도\r\n    const month = ('0' + (today.getMonth()+1).toString()).slice(-2)  // 월\r\n    \r\n    const date = ('0' + today.getDate().toString()).slice(-2);  // 날짜\r\n    const YYYYMMDD = year + month + date\r\n    useEffect (() => {\r\n        loadSchool(\"@NM\").then(data => setSchool_NM_data(data))\r\n        loadSchool(\"@ID\").then(data => setSchool_ID_data(data))\r\n        loadSchool(\"@REGION\").then(data => setSchool_REGION_data(data))\r\n    }, []);\r\n    const key = '6c8bda44c1d949b88a48a7d0bb3a8205'\r\n    const url = `https://open.neis.go.kr/hub/mealServiceDietInfo?KEY=${key}&TYPE=json&pIndex=1&pSize=30&SD_SCHUL_CODE=${school_ID_data}&ATPT_OFCDC_SC_CODE=${school_REGION_data}&MLSV_FROM_YMD=${YYYYMMDD}`\r\n    fetch(url).then(res => res.json()).then( data => {\r\n        if (data['mealServiceDietInfo'] != undefined) {\r\n            setMeal_data(data['mealServiceDietInfo'][1]['row'].map(i => <View style={styles.meal_box} key={i['MLSV_TO_YMD']}><Text style={styles.date} key={i['MLSV_FROM_YMD']}>{i.MLSV_FROM_YMD.slice(0,4)}년 {i.MLSV_FROM_YMD.slice(4,6)}월 {i.MLSV_FROM_YMD.slice(6)}일</Text><Text style={styles.meal} key={i['DDISH_NM']['MLSV_YMD']}>{i.DDISH_NM.replace(/[\"']/g, \"\").replace(/<br\\/>/g, \"\\n\")}</Text></View>))\r\n        } else {\r\n            setMeal_data(<Text style={styles.error}>어라? 등록된 급식 정보가 없네요.</Text>)\r\n        }\r\n    })\r\n\r\n\r\n    return (\r\n        <View style={styles.main}>\r\n            <ScrollView   showsVerticalScrollIndicator={false}  showsHorizontalScrollIndicator={false}>{meal_data}</ScrollView>\r\n        </View>\r\n    )\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    main: {\r\n        backgroundColor: \"#FFFFFF\",\r\n        width: \"100%\",\r\n\r\n        paddingHorizontal: 25,\r\n    },\r\n    date: {\r\n        fontSize: 20,\r\n        fontWeight: \"700\",\r\n        lineHeight: 30,\r\n        marginBottom: 6,\r\n        color: \"#000\",\r\n    },\r\n    TodayDate: {\r\n        fontSize: 20,\r\n        fontWeight: \"700\",\r\n        lineHeight: 30,\r\n        marginBottom: 6,\r\n        color: \"#F46413\",\r\n    },\r\n    meal: {\r\n        fontSize: 16,\r\n        lineHeight: 20,\r\n        paddingBottom: 10,\r\n        color: \"#2D3033\",\r\n    },\r\n    meal_box: {\r\n        backgroundColor: \"#F3F2F3\",\r\n        margin: 6,\r\n        borderRadius: 20,\r\n        padding: 12,\r\n    },\r\n    header: {\r\n        width: \"100%\",\r\n        height: 50,\r\n        marginHorizontal: 10\r\n    },\r\n    content: {\r\n        paddingTop: 30,\r\n        paddingBottom: \"20%\",\r\n    }\r\n\r\n});\r\n\r\nexport default Meal_more;"],"mappings":"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"},"metadata":{},"sourceType":"script"}