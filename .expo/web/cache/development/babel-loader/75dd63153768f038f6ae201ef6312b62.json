{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = decayAnimation;\n\nvar _base = require(\"../base\");\n\nvar VELOCITY_EPS = 5;\n\nfunction decay(clock, state, config) {\n  var lastTime = (0, _base.cond)(state.time, state.time, clock);\n  var deltaTime = (0, _base.sub)(clock, lastTime);\n  var kv = (0, _base.pow)(config.deceleration, deltaTime);\n  var kx = (0, _base.divide)((0, _base.multiply)(config.deceleration, (0, _base.sub)(1, kv)), (0, _base.sub)(1, config.deceleration));\n  var v0 = (0, _base.divide)(state.velocity, 1000);\n  var v = (0, _base.multiply)(v0, kv, 1000);\n  var x = (0, _base.add)(state.position, (0, _base.multiply)(v0, kx));\n  return (0, _base.block)([(0, _base.set)(state.position, x), (0, _base.set)(state.velocity, v), (0, _base.set)(state.time, clock), (0, _base.cond)((0, _base.lessThan)((0, _base.abs)(v), VELOCITY_EPS), (0, _base.set)(state.finished, 1))]);\n}\n\nvar procDecay = (0, _base.proc)(function (clock, time, velocity, position, finished, deceleration) {\n  return decay(clock, {\n    time: time,\n    velocity: velocity,\n    position: position,\n    finished: finished\n  }, {\n    deceleration: deceleration\n  });\n});\n\nfunction decayAnimation(clock, _ref, _ref2) {\n  var time = _ref.time,\n      velocity = _ref.velocity,\n      position = _ref.position,\n      finished = _ref.finished;\n  var deceleration = _ref2.deceleration;\n  return procDecay(clock, time, velocity, position, finished, deceleration);\n}","map":{"version":3,"names":["VELOCITY_EPS","decay","clock","state","config","lastTime","cond","time","deltaTime","sub","kv","pow","deceleration","kx","divide","multiply","v0","velocity","v","x","add","position","block","set","lessThan","abs","finished","procDecay","proc","decayAnimation"],"sources":["C:/.project/today_meal/node_modules/react-native-reanimated/lib/reanimated1/animations/decay.js"],"sourcesContent":["import {\n  cond,\n  sub,\n  pow,\n  divide,\n  multiply,\n  add,\n  block,\n  set,\n  lessThan,\n  proc,\n  abs,\n} from '../base';\n\nconst VELOCITY_EPS = 5;\n\nfunction decay(clock, state, config) {\n  const lastTime = cond(state.time, state.time, clock);\n  const deltaTime = sub(clock, lastTime);\n\n  // v0 = v / 1000\n  // v = v0 * powf(deceleration, dt);\n  // v = v * 1000;\n\n  // x0 = x;\n  // x = x0 + v0 * deceleration * (1 - powf(deceleration, dt)) / (1 - deceleration)\n  const kv = pow(config.deceleration, deltaTime);\n  const kx = divide(\n    multiply(config.deceleration, sub(1, kv)),\n    sub(1, config.deceleration)\n  );\n  const v0 = divide(state.velocity, 1000);\n  const v = multiply(v0, kv, 1000);\n  const x = add(state.position, multiply(v0, kx));\n  return block([\n    set(state.position, x),\n    set(state.velocity, v),\n    set(state.time, clock),\n    cond(lessThan(abs(v), VELOCITY_EPS), set(state.finished, 1)),\n  ]);\n}\n\nconst procDecay = proc(\n  (clock, time, velocity, position, finished, deceleration) =>\n    decay(clock, { time, velocity, position, finished }, { deceleration })\n);\n\nexport default function decayAnimation(\n  clock,\n  { time, velocity, position, finished },\n  { deceleration }\n) {\n  return procDecay(clock, time, velocity, position, finished, deceleration);\n}\n"],"mappings":";;;;;AAAA;;AAcA,IAAMA,YAAY,GAAG,CAArB;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsBC,KAAtB,EAA6BC,MAA7B,EAAqC;EACnC,IAAMC,QAAQ,GAAG,IAAAC,UAAA,EAAKH,KAAK,CAACI,IAAX,EAAiBJ,KAAK,CAACI,IAAvB,EAA6BL,KAA7B,CAAjB;EACA,IAAMM,SAAS,GAAG,IAAAC,SAAA,EAAIP,KAAJ,EAAWG,QAAX,CAAlB;EAQA,IAAMK,EAAE,GAAG,IAAAC,SAAA,EAAIP,MAAM,CAACQ,YAAX,EAAyBJ,SAAzB,CAAX;EACA,IAAMK,EAAE,GAAG,IAAAC,YAAA,EACT,IAAAC,cAAA,EAASX,MAAM,CAACQ,YAAhB,EAA8B,IAAAH,SAAA,EAAI,CAAJ,EAAOC,EAAP,CAA9B,CADS,EAET,IAAAD,SAAA,EAAI,CAAJ,EAAOL,MAAM,CAACQ,YAAd,CAFS,CAAX;EAIA,IAAMI,EAAE,GAAG,IAAAF,YAAA,EAAOX,KAAK,CAACc,QAAb,EAAuB,IAAvB,CAAX;EACA,IAAMC,CAAC,GAAG,IAAAH,cAAA,EAASC,EAAT,EAAaN,EAAb,EAAiB,IAAjB,CAAV;EACA,IAAMS,CAAC,GAAG,IAAAC,SAAA,EAAIjB,KAAK,CAACkB,QAAV,EAAoB,IAAAN,cAAA,EAASC,EAAT,EAAaH,EAAb,CAApB,CAAV;EACA,OAAO,IAAAS,WAAA,EAAM,CACX,IAAAC,SAAA,EAAIpB,KAAK,CAACkB,QAAV,EAAoBF,CAApB,CADW,EAEX,IAAAI,SAAA,EAAIpB,KAAK,CAACc,QAAV,EAAoBC,CAApB,CAFW,EAGX,IAAAK,SAAA,EAAIpB,KAAK,CAACI,IAAV,EAAgBL,KAAhB,CAHW,EAIX,IAAAI,UAAA,EAAK,IAAAkB,cAAA,EAAS,IAAAC,SAAA,EAAIP,CAAJ,CAAT,EAAiBlB,YAAjB,CAAL,EAAqC,IAAAuB,SAAA,EAAIpB,KAAK,CAACuB,QAAV,EAAoB,CAApB,CAArC,CAJW,CAAN,CAAP;AAMD;;AAED,IAAMC,SAAS,GAAG,IAAAC,UAAA,EAChB,UAAC1B,KAAD,EAAQK,IAAR,EAAcU,QAAd,EAAwBI,QAAxB,EAAkCK,QAAlC,EAA4Cd,YAA5C;EAAA,OACEX,KAAK,CAACC,KAAD,EAAQ;IAAEK,IAAI,EAAJA,IAAF;IAAQU,QAAQ,EAARA,QAAR;IAAkBI,QAAQ,EAARA,QAAlB;IAA4BK,QAAQ,EAARA;EAA5B,CAAR,EAAgD;IAAEd,YAAY,EAAZA;EAAF,CAAhD,CADP;AAAA,CADgB,CAAlB;;AAKe,SAASiB,cAAT,CACb3B,KADa,eAIb;EAAA,IAFEK,IAEF,QAFEA,IAEF;EAAA,IAFQU,QAER,QAFQA,QAER;EAAA,IAFkBI,QAElB,QAFkBA,QAElB;EAAA,IAF4BK,QAE5B,QAF4BA,QAE5B;EAAA,IADEd,YACF,SADEA,YACF;EACA,OAAOe,SAAS,CAACzB,KAAD,EAAQK,IAAR,EAAcU,QAAd,EAAwBI,QAAxB,EAAkCK,QAAlC,EAA4Cd,YAA5C,CAAhB;AACD"},"metadata":{},"sourceType":"script"}